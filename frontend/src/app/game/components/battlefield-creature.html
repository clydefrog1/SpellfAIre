<div
  class="bf-creature"
  [class.player]="side() === 'player'"
  [class.opponent]="side() === 'opponent'"
  [class.selected]="selected()"
  [class.selectable]="selectable()"
  [class.highlighted]="highlighted()"
  [class.attack-source]="isAttackSource()"
  [class.attack-source-even]="isAttackSourceEven()"
  [class.attack-source-odd]="isAttackSourceOdd()"
  [class.attack-targeted]="isAttackTargeted()"
  [class.attack-targeted-even]="isAttackTargetedEven()"
  [class.attack-targeted-odd]="isAttackTargetedOdd()"
  [class.hit-damage]="hitFx()?.kind === 'damage'"
  [class.hit-heal]="hitFx()?.kind === 'heal'"
  [class.hit-even]="hitEven()"
  [class.hit-odd]="hitOdd()"
  [class.death-active]="deathFx() !== null"
  [class.has-guard]="hasGuard()"
  [class.has-ward]="hasWard()"
  [class.frozen]="isFrozen()"
  [class.damaged]="isDamaged()"
  [class.can-attack]="creature().canAttack && !creature().hasAttackedThisTurn"
  [class.exhausted]="creature().hasAttackedThisTurn"
  (click)="onClick()"
  role="button"
  [attr.tabindex]="selectable() ? 0 : -1"
  [attr.title]="getTooltip()"
  [attr.aria-label]="name() + ' ' + creature().attack + '/' + creature().health"
>
  @if (deathFx()) {
    <div
      class="death-impact"
      aria-hidden="true"
    ></div>
  }

  @if (spellFx()) {
    <div
      class="spell-impact"
      [class.benefit]="spellFx()!.kind === 'benefit'"
      [class.harm]="spellFx()!.kind === 'harm'"
      [class.spell-even]="spellEven()"
      [class.spell-odd]="spellOdd()"
      aria-hidden="true"
    ></div>
  }

  @if (floatFx()) {
    <div
      class="combat-float"
      [class.damage]="floatFx()!.kind === 'damage'"
      [class.heal]="floatFx()!.kind === 'heal'"
      [class.float-even]="floatEven()"
      [class.float-odd]="floatOdd()"
      aria-hidden="true"
    >
      {{ floatFx()!.kind === 'damage' ? '-' : '+' }}{{ floatFx()!.value }}
    </div>
  }

  @if (isAttackReady()) {
    <div class="attack-action-tip" role="tooltip">Click to attack</div>
  }

  @if (card()) {
    <app-game-card
      class="bf-card-face"
      [card]="card()!"
      [compact]="true"
      [hideCost]="true"
      [interactive]="false"
      [attackOverride]="creature().attack"
      [healthOverride]="creature().health"
      [keywordsOverride]="creature().keywords"
    />
  } @else {
    <div class="bf-card-fallback">{{ name() }}</div>
  }

  @if (isAttackReady()) {
    <div class="attack-ready-badge" title="Ready to attack - Click to select">
      üó°Ô∏è
    </div>
  }
</div>
